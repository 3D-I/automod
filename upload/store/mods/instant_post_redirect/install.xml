<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.0.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		<title lang="en-gb">Instant Post Redirect</title>
		<description lang="en-gb"><![CDATA[Redirects instantly after posting a message instead of using meta redirection.]]></description>
		<author-notes lang="en-gb"><![CDATA[Faster :)
		
This is my first MOD for phpBB3, i've done this MOD for phpBB2 already, though.

Enjoy!]]></author-notes>
		<author-group>
			<author>
				<realname>Igor Wiedler</realname>
				<email>evil@phpbbmodders.net</email>
				<username>eviL&lt;3</username>
				<homepage>http://phpbbmodders.net</homepage>
				<contributions />
			</author>
		</author-group>
		<mod-version>
			<major>1</major>
			<minor>0</minor>
			<revision>1</revision>
		</mod-version>
		<installation>
			<level>easy</level>
			<time>60</time>
			<target-version>
				<target-primary>3.0.RC3</target-primary>
				<target-major allow="exact">3</target-major>
				<target-minor allow="exact">0</target-minor>
			</target-version>
		</installation>
		<history>
			<entry>
				<date>2006-12-23</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>0</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Initial release.</change>
				</changelog>
			</entry>
			<entry>
				<date>2006-12-25</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>1</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Christmas!</change>
					<change>Removed the commenting out, as it isn't needed.</change>
				</changelog>
			</entry>
			<entry>
				<date>2006-12-29</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>2</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Small change as suggested by LEW21 (actually a fix, as i just noticed)</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-05-22</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>3</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Optimized the Find action</change>
					<change>Removed the str_replace, as that happens within the redirect() function</change>
					<change>license.txt :P</change>
					<change>prosilver xsl and prosilver template (for addon)</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-05-22</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>4</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Fixed approve post bug (thanks hurry)</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-05-24</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>5</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Fixed add-on</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-06-24</date>
				<rev-version>
					<major>0</major>
					<minor>1</minor>
					<revision>6</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Updated for RC2</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-07-02</date>
				<rev-version>
					<major>1</major>
					<minor>0</minor>
					<revision>0</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Lets submit it to the moddb :D</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-07-02</date>
				<rev-version>
					<major>1</major>
					<minor>0</minor>
					<revision>0</revision>
					<release>a</release>
				</rev-version>
				<changelog lang="en-gb">
					<change>Gotta love insta-deny</change>
				</changelog>
			</entry>
			<entry>
				<date>2007-08-01</date>
				<rev-version>
					<major>1</major>
					<minor>0</minor>
					<revision>1</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>RC4</change>
				</changelog>
			</entry>
		</history>
	</header>
	<action-group>
		<open src="posting.php">
			<edit>
				<find><![CDATA[			if ($post_need_approval)
			{
				meta_refresh(10, $redirect_url);
				$message = ($mode == 'edit') ? $user->lang['POST_EDITED_MOD'] : $user->lang['POST_STORED_MOD'];
				$message .= (($user->data['user_id'] == ANONYMOUS) ? '' : ' '. $user->lang['POST_APPROVAL_NOTIFY']);
			}
			else
			{
				meta_refresh(3, $redirect_url);]]></find>
				<action type="after-add"><![CDATA[//-- mod : Instant Post Redirect ------------------------------------------------------------
//-- add
				redirect($redirect_url);
//-- fin mod : Instant Post Redirect --------------------------------------------------------]]></action>
			</edit>
		</open>
	</action-group>
</mod>